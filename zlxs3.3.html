<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶²ä½“è¡¨é¢å¼ åŠ›ç³»æ•°çš„æµ‹å®šå®éªŒæŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        h2 {
            color: #34495e;
            border-bottom: 2px solid #bdc3c7;
            padding-bottom: 10px;
            margin-top: 30px;
            font-weight: 500;
        }
        h3 {
            color: #3498db;
            margin-top: 25px;
            font-weight: 500;
        }
        .basic-info {
            background: rgba(236, 240, 241, 0.5);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px solid rgba(189, 195, 199, 0.2);
        }
        .basic-info table {
            width: 100%;
            border-collapse: collapse;
        }
        .basic-info td {
            padding: 12px;
            border: none;
        }
        .basic-info td:first-child {
            font-weight: 600;
            color: #2c3e50;
            width: 15%;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ecf0f1;
        }
        th {
            background: linear-gradient(to bottom, #3498db, #2980b9);
            color: white;
            font-weight: 500;
        }
        tr:nth-child(even) {
            background-color: rgba(236, 240, 241, 0.3);
        }
        tr:hover {
            background-color: rgba(52, 152, 219, 0.1);
        }
        .fill-blank {
            border: none;
            border-bottom: 2px solid #3498db;
            background: rgba(52, 152, 219, 0.1);
            padding: 4px 8px;
            text-align: center;
            min-width: 80px;
            font-family: inherit;
            color: #2c3e50;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .fill-blank:focus {
            outline: none;
            background: rgba(52, 152, 219, 0.2);
            border-bottom: 2px solid #2980b9;
        }
        .data-input {
            width: 70px;
            text-align: center;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            padding: 6px;
            transition: all 0.3s ease;
        }
        .data-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        .formula {
            background: rgba(255, 245, 157, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Cambria Math', 'Times New Roman', serif;
            border-left: 4px solid #f1c40f;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-size: 16px;
            line-height: 1.6;
        }
        .experiment-content {
            background: rgba(200, 230, 201, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            border: 1px solid rgba(76, 175, 80, 0.1);
        }
        .score-section {
            background: rgba(255, 255, 255, 0.7);
            border: 2px solid #4caf50;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .score-btn {
            background: linear-gradient(to bottom, #4caf50, #388e3c);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            margin: 10px;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .score-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        .chart-btn {
            background: linear-gradient(to bottom, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            margin: 10px;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .chart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        .score-display {
            font-size: 24px;
            color: #2e7d32;
            margin: 15px 0;
            font-weight: bold;
        }
        .correct {
            color: #2e7d32 !important;
            border-bottom: 2px solid #4caf50 !important;
            background-color: rgba(76, 175, 80, 0.1) !important;
        }
        .incorrect {
            color: #c62828 !important;
            border-bottom: 2px solid #f44336 !important;
            background-color: rgba(244, 67, 54, 0.1) !important;
        }
        .empty {
            color: #757575 !important;
            border-bottom: 2px dashed #bdbdbd !important;
            background-color: rgba(189, 189, 189, 0.1) !important;
        }
        .info-input {
            border: none;
            border-bottom: 2px solid #3498db;
            background: rgba(52, 152, 219, 0.1);
            padding: 6px 8px;
            text-align: left;
            min-width: 150px;
            font-family: inherit;
            color: #2c3e50;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .info-input:focus {
            outline: none;
            background: rgba(52, 152, 219, 0.2);
            border-bottom: 2px solid #2980b9;
        }
        .chart-container {
            margin: 30px 0;
            position: relative;
            height: 400px;
            width: 100%;
            background: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .summary-box {
            min-height: 150px;
            border: 1px solid rgba(52, 152, 219, 0.2);
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.6);
            width: 100%;
            box-sizing: border-box;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }
        .comment-section {
            background: rgba(255, 243, 224, 0.7);
            border: 2px solid #ff9800;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .comment-title {
            color: #e65100;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        .comment-content {
            color: #bf360c;
            font-size: 16px;
            line-height: 1.8;
            text-align: justify;
        }
        .auto-grade-btn {
            background: linear-gradient(to bottom, #ff9800, #f57c00);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            margin: 10px;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .auto-grade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        .comment-footer {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px dashed #ff9800;
            text-align: right;
            font-size: 14px;
            color: #e65100;
            font-weight: 500;
        }
        .section-title {
            background: rgba(52, 152, 219, 0.1);
            padding: 10px 15px;
            border-radius: 6px;
            margin: 20px 0 10px 0;
            font-weight: 600;
            color: #2c3e50;
        }
        .calculation-result {
            font-weight: bold;
            color: #2c3e50;
            padding: 8px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
        }
        .warning-box {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ff9800;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            color: #e65100;
        }
        .question-item {
            margin: 10px 0;
            line-height: 1.6;
        }
        .answer-status {
            display: inline-block;
            margin-left: 8px;
            font-size: 16px;
            font-weight: bold;
            vertical-align: middle;
            transition: all 0.3s ease;
        }
        .answer-status.correct-icon {
            color: #4caf50;
        }
        .answer-status.incorrect-icon {
            color: #f44336;
        }
        .answer-status.empty-icon {
            color: #9e9e9e;
        }
        .fill-blank-container {
            position: relative;
            display: inline-block;
        }
        .thought-input {
            width: 100%;
            min-height: 80px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }
        .thought-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        .thought-answer-btn {
            background: linear-gradient(to bottom, #2196f3, #1976d2);
            color: white;
            border: none;
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 15px;
            cursor: pointer;
            margin: 5px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .thought-answer-btn:hover {
            transform: translateY(-1px);
        }
        .thought-answer {
            display: none;
            background: rgba(76, 175, 80, 0.1);
            border-left: 3px solid #4caf50;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            font-size: 14px;
            color: #2e7d32;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .result-area {
            background-color: #e8f4f8;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }
        .result-title {
            color: #2c3e50;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ¶²ä½“è¡¨é¢å¼ åŠ›ç³»æ•°çš„æµ‹å®šå®éªŒæŠ¥å‘Š</h1>
        
        <div class="basic-info">
            <table>
                <tr>
                    <td>ä¸“ä¸š</td>
                    <td><input type="text" class="info-input" id="major" placeholder="å¡«å†™ä¸“ä¸š"></td>
                    <td>ç­çº§</td>
                    <td><input type="text" class="info-input" id="class" placeholder="å¡«å†™ç­çº§"></td>
                </tr>
                <tr>
                    <td>å­¦å·</td>
                    <td><input type="text" class="info-input" id="student-id" placeholder="å¡«å†™å­¦å·"></td>
                    <td>å§“å</td>
                    <td><input type="text" class="info-input" id="name" placeholder="å¡«å†™å§“å"></td>
                </tr>
                <tr>
                    <td>æŒ‡å¯¼æ•™å¸ˆ</td>
                    <td><input type="text" class="info-input" id="instructor" value="é©¬å‚" placeholder="å¡«å†™æŒ‡å¯¼æ•™å¸ˆ"></td>
                    <td>åŒç»„äºº</td>
                    <td><input type="text" class="info-input" id="partner" placeholder="å¡«å†™åŒç»„äºº"></td>
                </tr>
                <tr>
                    <td>å®éªŒæ—¶é—´</td>
                    <td><input type="date" class="info-input" id="date" value="2023-11-15"></td>
                    <td>å®éªŒåœ°ç‚¹</td>
                    <td><input type="text" class="info-input" id="location" placeholder="å¡«å†™å®éªŒåœ°ç‚¹"></td>
                </tr>
            </table>
        </div>

        <h2>ä¸€ã€å®éªŒç›®çš„</h2>
        <div class="question-item">
            1. ç”¨<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="æ‹‰è„±æ³•" placeholder="å¡«å†™æ–¹æ³•"><span class="answer-status"></span></span>æµ‹é‡å®¤æ¸©ä¸‹æ¶²ä½“è¡¨é¢å¼ åŠ›ç³»æ•°ï¼›
        </div>
        <div class="question-item">
            2. å­¦ä¹ åŠ›æ•ä¼ æ„Ÿå™¨çš„<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="å®šæ ‡" placeholder="å¡«å†™æ–¹æ³•"><span class="answer-status"></span></span>æ–¹æ³•ã€‚
        </div>

        <h2>äºŒã€å®éªŒä»ªå™¨</h2>
<!-- æ’å…¥å®éªŒä»ªå™¨å›¾ç‰‡ -->
<img src="https://xiaoxinfdfg.github.io/fsadfse2/zlxytu1.png" 
     alt="å®éªŒä»ªå™¨ç¤ºæ„å›¾" 
     class="apparatus-img"
     style="max-width: 80%; margin: 20px auto; display: block; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <div class="question-item">
            æ¶²ä½“è¡¨é¢å¼ åŠ›ç³»æ•°æµ‹å®šä»ªåŒ…æ‹¬ç”µæºã€æ•°å­—ç”µå‹è¡¨ã€<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="é‡‘å±æ¶å°" placeholder="å¡«å†™ä»ªå™¨"><span class="answer-status"></span></span>ã€<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="å¾®è°ƒå‡é™å°" placeholder="å¡«å†™ä»ªå™¨"><span class="answer-status"></span></span>ã€è£…æœ‰åŠ›æ•ä¼ æ„Ÿå™¨å›ºå®šæ†ã€<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="ç››æ¶²ä½“çš„ç»ç’ƒçš¿" placeholder="å¡«å†™ä»ªå™¨"><span class="answer-status"></span></span>å’Œ<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="åœ†ç¯å½¢åŠç‰‡" placeholder="å¡«å†™ä»ªå™¨"><span class="answer-status"></span></span>ç­‰ã€‚
        </div>

        <h2>ä¸‰ã€å®éªŒåŸç†</h2>
        <div class="question-item">
            é€šè¿‡æµ‹é‡ä¸€ä¸ªå·²çŸ¥å‘¨é•¿çš„åœ†ç¯å½¢åŠç‰‡ä»å¾…æµ‹æ¶²ä½“è¡¨é¢è„±ç¦»æ—¶éœ€è¦çš„åŠ›ï¼Œæ±‚å¾—è¯¥æ¶²ä½“è¡¨é¢å¼ åŠ›ç³»æ•°çš„å®éªŒæ–¹æ³•ç§°ä¸ºæ‹‰è„±æ³•ã€‚
            <div class="formula">F = Î±Ï€(Dâ‚ + Dâ‚‚)</div>
        </div>
        <div class="question-item">
            å¼ä¸­ï¼ŒFä¸º<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="è„±ç¦»åŠ›" placeholder="å¡«å†™ç‰©ç†é‡"><span class="answer-status"></span></span>ï¼ŒDâ‚å’ŒDâ‚‚åˆ†åˆ«ä¸ºåœ†ç¯çš„<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="å¤–ç›´å¾„" placeholder="å¡«å†™å‚æ•°"><span class="answer-status"></span></span>å’Œ<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="å†…ç›´å¾„" placeholder="å¡«å†™å‚æ•°"><span class="answer-status"></span></span>ï¼ŒÎ±ä¸ºæ¶²ä½“çš„<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="è¡¨é¢å¼ åŠ›ç³»æ•°" placeholder="å¡«å†™ç‰©ç†é‡"><span class="answer-status"></span></span>ã€‚
        </div>
        <div class="question-item">
            ç¡…å‹é˜»å¼åŠ›æ•ä¼ æ„Ÿå™¨ç”±å¼¹æ€§æ¢å’Œè´´åœ¨æ¢ä¸Šçš„ä¼ æ„Ÿå™¨èŠ¯ç‰‡ç»„æˆï¼Œå…¶ä¸­ä¼ æ„Ÿå™¨èŠ¯ç‰‡ç”±å››ä¸ªç¡…æ‰©æ•£ç”µé˜»é›†æˆä¸€ä¸ªéå¹³è¡¡ç”µæ¡¥ï¼Œå½“å¤–ç•Œå‹åŠ›ä½œç”¨äºé‡‘å±æ¢æ—¶ï¼Œåœ¨å‹åŠ›ä½œç”¨ä¸‹ï¼Œç”µæ¡¥å¤±å»å¹³è¡¡ï¼Œæ­¤æ—¶å°†æœ‰ç”µå‹ä¿¡å·è¾“å‡ºï¼Œè¾“å‡ºç”µå‹å¤§å°ä¸æ‰€åŠ å¤–åŠ›æˆæ­£æ¯”ï¼Œå³ï¼š
            <div class="formula">Î”U = KF</div>
        </div>
        <div class="question-item">
            å¼ä¸­ï¼ŒFä¸ºå¤–åŠ›çš„å¤§å°ï¼ŒKä¸ºç¡…å‹é˜»å¼åŠ›æ•ä¼ æ„Ÿå™¨çš„<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="çµæ•åº¦" placeholder="å¡«å†™å‚æ•°"><span class="answer-status"></span></span>ï¼ŒÎ”Uä¸ºä¼ æ„Ÿå™¨<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="è¾“å‡ºç”µå‹" placeholder="å¡«å†™å‚æ•°"><span class="answer-status"></span></span>çš„å¤§å°ã€‚
        </div>

        <h2>å››ã€å®éªŒå†…å®¹</h2>
        <div class="experiment-content">
            <h3>1ï¼åŠ›æ•ä¼ æ„Ÿå™¨çš„å®šæ ‡ã€‚</h3>
            <p>æ¯ä¸ªåŠ›æ•ä¼ æ„Ÿå™¨çš„çµæ•åº¦éƒ½æœ‰æ‰€ä¸åŒï¼Œåœ¨å®éªŒå‰ï¼Œåº”å…ˆå°†å…¶å®šæ ‡ï¼Œå®šæ ‡æ­¥éª¤å¦‚ä¸‹ï¼š</p>
            <p>ï¼ˆ1ï¼‰æ‰“å¼€ä»ªå™¨çš„ç”µæºå¼€å…³ï¼Œå°†ä»ªå™¨é¢„çƒ­ï¼›</p>
            <p>ï¼ˆ2ï¼‰åœ¨ä¼ æ„Ÿå™¨æ¢ç«¯å¤´çš„å°é’©ä¸­ï¼ŒæŒ‚ä¸Šç ç ç›˜ï¼Œè°ƒèŠ‚<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="è°ƒé›¶æ—‹é’®" placeholder="å¡«å†™æ“ä½œ"><span class="answer-status"></span></span>ï¼Œä½¿<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="æ•°å­—ç”µå‹è¡¨" placeholder="å¡«å†™ä»ªå™¨"><span class="answer-status"></span></span>æ˜¾ç¤ºä¸ºé›¶ï¼›</p>
            <p>ï¼ˆ3ï¼‰åœ¨ç ç ç›˜ä¸Šåˆ†åˆ«åŠ ä¸Šå¦‚0.5gã€1.0gã€1.5gã€2.0gã€2.5gã€3.0gç­‰è´¨é‡çš„ç ç ï¼Œè®°å½•æ•°å­—ç”µå‹è¡¨çš„è¯»æ•°å€¼Uï¼Œæ•°æ®è®°å½•äºè¡¨1ï¼›</p>
            <p>ï¼ˆ4ï¼‰ç”¨<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="æœ€å°äºŒä¹˜æ³•" placeholder="å¡«å†™æ–¹æ³•"><span class="answer-status"></span></span>ä½œç›´çº¿æ‹Ÿåˆï¼Œæ±‚å‡ºä¼ æ„Ÿå™¨çµæ•åº¦Kã€‚</p>
        </div>
        
        <div class="experiment-content">
            <h3>2ï¼åœ†ç¯å½¢åŠç‰‡çš„æµ‹é‡ä¸æ¸…æ´ã€‚</h3>
            <p>ï¼ˆ1ï¼‰ç”¨æ¸¸æ ‡å¡å°ºæµ‹é‡åœ†ç¯å½¢åŠç‰‡çš„å¤–ç›´å¾„Dâ‚å’Œå†…ç›´å¾„Dâ‚‚ã€‚</p>
            <p>ï¼ˆ2ï¼‰åœ†ç¯å½¢åŠç‰‡çš„è¡¨é¢çŠ¶å†µä¸æµ‹é‡ç»“æœæœ‰å¾ˆå¤§çš„å…³ç³»ï¼Œå®éªŒå‰åº”å°†åœ†ç¯å½¢åŠç‰‡åœ¨NaOHæº¶æ¶²ä¸­æµ¸æ³¡20ï½30minï¼Œç„¶åç”¨çº¯å‡€æ°´æ´—å‡€ã€‚</p>
        </div>
        
        <div class="experiment-content">
            <h3>3ï¼è®¡ç®—æ¶²ä½“çš„è¡¨é¢å¼ åŠ›ç³»æ•°ã€‚</h3>
            <p>ï¼ˆ1ï¼‰å°†åœ†ç¯å½¢åŠç‰‡æŒ‚åœ¨ä¼ æ„Ÿå™¨çš„å°é’©ä¸Šï¼Œè°ƒèŠ‚<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="å‡é™å°" placeholder="å¡«å†™æ“ä½œ"><span class="answer-status"></span></span>ï¼Œå°†æ¶²ä½“å‡è‡³é è¿‘åœ†ç¯å½¢åŠç‰‡çš„ä¸‹æ²¿ï¼Œè§‚å¯Ÿ<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="åœ†ç¯å½¢åŠç‰‡" placeholder="å¡«å†™ä»ªå™¨"><span class="answer-status"></span></span>ä¸‹æ²¿ä¸å¾…æµ‹æ¶²é¢æ˜¯å¦å¹³è¡Œï¼Œè‹¥ä¸å¹³è¡Œï¼Œåˆ™å°†åœ†ç¯å½¢åŠç‰‡å–ä¸‹åï¼Œè°ƒèŠ‚åœ†ç¯å½¢åŠç‰‡ä¸Šçš„<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="ç»†ä¸" placeholder="å¡«å†™éƒ¨ä»¶"><span class="answer-status"></span></span>ï¼Œä½¿åœ†ç¯å½¢åŠç‰‡ä¸å¾…æµ‹æ¶²é¢å¹³è¡Œã€‚</p>
            <p>ï¼ˆ2ï¼‰è°ƒèŠ‚å®¹å™¨ä¸‹çš„å‡é™æ—‹é’®ï¼Œä½¿å…¶æ¸æ¸ä¸Šå‡ï¼Œå°†åœ†ç¯å½¢åŠç‰‡çš„ä¸‹æ²¿éƒ¨åˆ†<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="å…¨éƒ¨æµ¸æ²¡äº" placeholder="å¡«å†™çŠ¶æ€"><span class="answer-status"></span></span>å¾…æµ‹æ¶²ä½“ï¼Œç„¶ååå‘è°ƒèŠ‚å‡é™å°ï¼Œä½¿æ¶²é¢é€æ¸ä¸‹é™ï¼Œè¿™æ—¶ï¼Œåœ†ç¯å½¢åŠç‰‡å’Œæ¶²é¢é—´å½¢æˆä¸€<span class="fill-blank-container"><input type="text" class="fill-blank" data-answer="ç¯å½¢æ¶²è†œ" placeholder="å¡«å†™ç°è±¡"><span class="answer-status"></span></span>ï¼Œç»§ç»­ä¸‹é™æ¶²é¢ï¼Œæµ‹å‡ºç¯å½¢æ¶²è†œå³å°†æ‹‰æ–­å‰ä¸€ç¬é—´æ•°å­—ç”µå‹è¡¨è¯»æ•°å€¼Uâ‚å’Œæ¶²è†œæ‹‰æ–­åä¸€ç¬é—´æ•°å­—ç”µå‹è¡¨è¯»æ•°å€¼Uâ‚‚ï¼Œåˆ™Î”U=Uâ‚âˆ’Uâ‚‚ï¼Œå°†å®éªŒæ•°æ®è®°å½•äºè¡¨2é‡å¤æ“ä½œ5æ¬¡ã€‚</p>
            <p>ï¼ˆ3ï¼‰å°†å®éªŒæ•°æ®ä»£å…¥å…¬å¼ï¼Œæ±‚å‡ºæ¶²ä½“çš„è¡¨é¢å¼ åŠ›ç³»æ•°ï¼Œå¹¶ä¸æ ‡å‡†å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè®¡ç®—ç›¸å¯¹è¯¯å·®ã€‚</p>
        </div>

        <h2>äº”ã€å®éªŒæ•°æ®è®°å½•ä¸å¤„ç†</h2>
        
        <div class="section-title">è¡¨1 ä¼ æ„Ÿå™¨çµæ•åº¦æµ‹é‡æ•°æ®</div>
        <table>
            <thead>
                <tr>
                    <th>ç ç è´¨é‡/g</th>
                    <th>0.5</th>
                    <th>1.0</th>
                    <th>1.5</th>
                    <th>2.0</th>
                    <th>2.5</th>
                    <th>3.0</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ç ç é‡åŠ›/N</td>
                    <td id="f1">0.0049</td>
                    <td id="f2">0.0098</td>
                    <td id="f3">0.0147</td>
                    <td id="f4">0.0196</td>
                    <td id="f5">0.0245</td>
                    <td id="f6">0.0294</td>
                </tr>
                <tr>
                    <td>ç”µå‹/mV</td>
                    <td><input type="number" class="data-input" id="u1" step="0.1" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u2" step="0.1" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u3" step="0.1" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u4" step="0.1" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u5" step="0.1" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u6" step="0.1" placeholder="mV"></td>
                </tr>
            </tbody>
        </table>
        
        <!-- ä¿ç•™æ–‡ä»¶1çš„æ ¡å‡†æ›²çº¿å¸ƒå±€ -->
        <div class="control-buttons">
            <button class="chart-btn" onclick="calculateSensitivity()">è®¡ç®—çµæ•åº¦K</button>
            <button class="chart-btn" onclick="drawCalibrationChart()">ç»˜åˆ¶æ ¡å‡†æ›²çº¿</button>
        </div>
        
        <div id="sensitivity-result" class="result-area" style="display:none;">
            <h3 class="result-title">çµæ•åº¦è®¡ç®—ç»“æœ</h3>
            <p>æ ¹æ®è¡¨1æ•°æ®ç»˜åˆ¶ç”µå‹-ç ç é‡åŠ›å…³ç³»ï¼Œå¹¶çº¿æ€§æ‹Ÿåˆæ±‚å¾—æ–œç‡K = <span id="K-value" class="score-display"></span> mV/N</p>
            <p>æ‹Ÿåˆçš„çº¿æ€§ç›¸å…³ç³»æ•° r = <span id="r-value" class="score-display"></span></p>
        </div>
        
        <div class="section-title">è¡¨2 è¡¨é¢å¼ åŠ›ç³»æ•°æµ‹é‡æ•°æ®</div>
        <table>
            <thead>
                <tr>
                    <th>ç¼–å·</th>
                    <th>Uâ‚/mV</th>
                    <th>Uâ‚‚/mV</th>
                    <th>Î”U/mV</th>
                    <th>F/N</th>
                    <th>Î±/NÂ·mâ»Â¹</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td><input type="number" class="data-input" id="u1_1" step="0.01" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u2_1" step="0.01" placeholder="mV"></td>
                    <td id="deltaU1">-</td>
                    <td id="F1">-</td>
                    <td id="alpha1">-</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><input type="number" class="data-input" id="u1_2" step="0.01" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u2_2" step="0.01" placeholder="mV"></td>
                    <td id="deltaU2">-</td>
                    <td id="F2">-</td>
                    <td id="alpha2">-</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><input type="number" class="data-input" id="u1_3" step="0.01" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u2_3" step="0.01" placeholder="mV"></td>
                    <td id="deltaU3">-</td>
                    <td id="F3">-</td>
                    <td id="alpha3">-</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><input type="number" class="data-input" id="u1_4" step="0.01" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u2_4" step="0.01" placeholder="mV"></td>
                    <td id="deltaU4">-</td>
                    <td id="F4">-</td>
                    <td id="alpha4">-</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td><input type="number" class="data-input" id="u1_5" step="0.01" placeholder="mV"></td>
                    <td><input type="number" class="data-input" id="u2_5" step="0.01" placeholder="mV"></td>
                    <td id="deltaU5">-</td>
                    <td id="F5">-</td>
                    <td id="alpha5">-</td>
                </tr>
            </tbody>
        </table>
        
        <div style="margin-top: 20px; text-align: center;">
            <label>åœ†ç¯å½¢åŠç‰‡å¤–ç›´å¾„ Dâ‚ = <input type="number" id="D1" class="data-input" step="0.001" placeholder="cm"> cm</label>
            <label style="margin-left: 20px;">å†…ç›´å¾„ Dâ‚‚ = <input type="number" id="D2" class="data-input" step="0.001" placeholder="cm"> cm</label>
            <label style="margin-left: 20px;">æ°´çš„æ¸©åº¦ï¼št = <input type="number" id="temp" class="data-input" step="0.1" placeholder="â„ƒ"> â„ƒ</label>
        </div>
        
        <div class="control-buttons">
            <button class="chart-btn" onclick="calculateAlpha()">è®¡ç®—è¡¨é¢å¼ åŠ›ç³»æ•°Î±</button>
            <button class="chart-btn" onclick="calculateError()">è®¡ç®—ç›¸å¯¹è¯¯å·®</button>
        </div>
        
        <div id="alpha-result" class="result-area" style="display:none;">
            <h3 class="result-title">è¡¨é¢å¼ åŠ›ç³»æ•°è®¡ç®—ç»“æœ</h3>
            <p>Î±çš„å¹³å‡å€¼ = <span id="alpha-avg" class="score-display"></span> NÂ·mâ»Â¹</p>
            <p>ç›¸å¯¹è¯¯å·® = <span id="relative-error" class="score-display"></span></p>
            
            <div class="summary-area">
                <h4>è¯¯å·®åˆ†æ</h4>
                <textarea class="summary-box" id="error-analysis" placeholder="è¯·åˆ†æå®éªŒè¯¯å·®çš„æ¥æºï¼Œå¦‚æµ‹é‡è¯¯å·®ã€ç¯å¢ƒå› ç´ ã€ä»ªå™¨ç²¾åº¦ã€æ“ä½œè¯¯å·®ç­‰ã€‚"></textarea>
            </div>
            
            <h4 style="margin-top: 15px;">é™„è¡¨ï¼šæ°´çš„è¡¨é¢å¼ åŠ›ç³»æ•°çš„æ ‡å‡†å€¼</h4>
            <table>
                <thead>
                    <tr>
                        <th>æ°´æ¸© t/â„ƒ</th>
                        <th>10</th>
                        <th>15</th>
                        <th>20</th>
                        <th>25</th>
                        <th>30</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Î±/NÂ·mâ»Â¹</td>
                        <td>0.07422</td>
                        <td>0.07322</td>
                        <td>0.07275</td>
                        <td>0.07197</td>
                        <td>0.07118</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- ä¿ç•™æ–‡ä»¶1çš„å›¾è¡¨å®¹å™¨å¸ƒå±€ -->
        <div class="chart-container">
            <canvas id="calibrationChart"></canvas>
        </div>

        <h2>å…­ã€æ€è€ƒé¢˜</h2>
        <div class="question-item">
            1ï¼å®éªŒä¸­ä¸ºä»€ä¹ˆéœ€è¦å…ˆå¯¹åŠ›æ•ä¼ æ„Ÿå™¨è¿›è¡Œå®šæ ‡ï¼Ÿä¸å®šæ ‡ç›´æ¥æµ‹é‡å¯ä»¥å—ï¼Ÿ
            <textarea class="thought-input" placeholder="è¯·ç®€è¦å›ç­”"></textarea>
            <button class="thought-answer-btn" onclick="toggleAnswer(1)">æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆ</button>
            <div id="answer1" class="thought-answer">
                ç­”ï¼šå¿…é¡»è¿›è¡Œå®šæ ‡ã€‚å› ä¸ºæ¯ä¸ªåŠ›æ•ä¼ æ„Ÿå™¨çš„çµæ•åº¦Kä¸åŒï¼Œä¸”Kå€¼ä¼šéšæ—¶é—´ã€æ¸©åº¦ç­‰å› ç´ å˜åŒ–ã€‚ä¸å®šæ ‡å°±æ— æ³•å»ºç«‹ç”µå‹Î”Uä¸åŠ›Fä¹‹é—´çš„å‡†ç¡®æ¢ç®—å…³ç³»ï¼Œå¯¼è‡´æµ‹é‡ç»“æœä¸å‡†ç¡®ã€‚å®šæ ‡å¯ä»¥æ¶ˆé™¤ä¼ æ„Ÿå™¨ä¸ªä½“å·®å¼‚å’Œç³»ç»Ÿè¯¯å·®ã€‚
            </div>
        </div>
        <div class="question-item">
            2ï¼åœ†ç¯å½¢åŠç‰‡ä¸ºä»€ä¹ˆè¦åœ¨NaOHæº¶æ¶²ä¸­æµ¸æ³¡ï¼Ÿå¦‚æœè¡¨é¢æœ‰æ²¹æ±¡ä¼šå¯¹å®éªŒç»“æœäº§ç”Ÿä»€ä¹ˆå½±å“ï¼Ÿ
            <textarea class="thought-input" placeholder="è¯·ç®€è¦å›ç­”"></textarea>
            <button class="thought-answer-btn" onclick="toggleAnswer(2)">æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆ</button>
            <div id="answer2" class="thought-answer">
                ç­”ï¼šNaOHæº¶æ¶²å¯ä»¥å»é™¤åŠç‰‡è¡¨é¢çš„æ²¹æ±¡å’Œæœ‰æœºç‰©æ±¡æŸ“ï¼Œç¡®ä¿åŠç‰‡è¡¨é¢å®Œå…¨äº²æ°´ã€‚å¦‚æœè¡¨é¢æœ‰æ²¹æ±¡ï¼Œä¼šæ”¹å˜æ¶²ä½“çš„æ¥è§¦è§’ï¼Œå¯¼è‡´è¡¨é¢å¼ åŠ›æµ‹é‡å€¼åå°ï¼Œç”šè‡³æ— æ³•å½¢æˆå®Œæ•´çš„æ¶²è†œï¼Œä¸¥é‡å½±å“å®éªŒç»“æœçš„å‡†ç¡®æ€§ã€‚
            </div>
        </div>
        <div class="question-item">
            3ï¼å®éªŒä¸­ä¸ºä»€ä¹ˆè¦æµ‹é‡åœ†ç¯å½¢åŠç‰‡çš„å†…å¤–ç›´å¾„ï¼Ÿå¦‚æœåªæµ‹é‡å¤–ç›´å¾„æˆ–å†…ç›´å¾„ï¼Œä¼šå¯¹ç»“æœäº§ç”Ÿä»€ä¹ˆå½±å“ï¼Ÿ
            <textarea class="thought-input" placeholder="è¯·ç®€è¦å›ç­”"></textarea>
            <button class="thought-answer-btn" onclick="toggleAnswer(3)">æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆ</button>
            <div id="answer3" class="thought-answer">
                ç­”ï¼šæ‹‰è„±æ³•å…¬å¼F=Î±Ï€(Dâ‚+Dâ‚‚)ä¸­ï¼Œéœ€è¦çš„æ˜¯åœ†ç¯çš„å¹³å‡å‘¨é•¿ï¼Œå³Ï€(Dâ‚+Dâ‚‚)ã€‚å¦‚æœåªæµ‹å¤–ç›´å¾„æˆ–å†…ç›´å¾„ï¼Œä¼šå¼•å…¥ç³»ç»Ÿè¯¯å·®ã€‚å®é™…æ¶²è†œç ´è£‚æ—¶ï¼Œç ´è£‚é¢ä½äºåœ†ç¯å†…å¤–ç›´å¾„ä¹‹é—´çš„æŸä¸ªä½ç½®ï¼Œå› æ­¤ä½¿ç”¨å†…å¤–ç›´å¾„çš„å¹³å‡å€¼æœ€ä¸ºåˆç†ã€‚
            </div>
        </div>

        <h2>ä¸ƒã€å®éªŒå°ç»“</h2>
        <textarea class="summary-box" id="experiment-summary" placeholder="è¯·åœ¨æ­¤å¤„å¡«å†™å®éªŒå°ç»“ï¼ŒåŒ…æ‹¬å®éªŒæ”¶è·ã€é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆã€æ”¹è¿›å»ºè®®ç­‰..."></textarea>

        <div class="warning-box">
            âš ï¸ æ¸©é¦¨æç¤ºï¼šè¯·è®¤çœŸå¡«å†™æ‰€æœ‰æ•°æ®ï¼Œå®Œæˆå®éªŒæŠ¥å‘Šåè¿›è¡Œè®¡ç®—å’Œè¯„åˆ†
        </div>

        <h2>å…«ã€è®¡ç®—é¢„ä¹ åˆ†æ•°</h2>
        <div class="score-section">
            <p>è¯·å¡«å†™æ‰€æœ‰å¡«ç©ºé¢˜åï¼Œç‚¹å‡»è®¡ç®—åˆ†æ•°</p>
            <button class="score-btn" onclick="calculatePreScore()">è®¡ç®—é¢„ä¹ åˆ†æ•°</button>
            <div class="score-display" id="scoreDisplay"></div>
        </div>

        <h2>ä¹ã€è‡ªåŠ¨è¯„åˆ†å¹¶ç”Ÿæˆè¯„è¯­(æ¸©é¦¨æé†’ï¼šä¿å­˜æŠ¥å‘Šæ—¶ï¼Œç¡®ä¿æ‰‹æœºå¤„äºæ¨ªå±çŠ¶æ€)</h2>
        <div class="comment-section" id="commentSection">
            <div class="comment-title">å®éªŒè¯„è¯­</div>
            <div class="comment-content" id="commentContent">
                <p style="text-align: center; color: #999;">ç‚¹å‡»"è‡ªåŠ¨è¯„åˆ†å¹¶ç”Ÿæˆè¯„è¯­"æŒ‰é’®ç”Ÿæˆå®éªŒè¯„è¯­å’ŒæŠ¥å‘Šå¾—åˆ†</p>
            </div>
            <div class="comment-footer" id="commentFooter" style="display: none;">
                <div>æŒ‡å¯¼æ•™å¸ˆï¼š<span id="teacherName"></span></div>
                <div>è¯„è¯­æ—¥æœŸï¼š<span id="currentDate"></span></div>
            </div>
            <div class="control-buttons">
                <button class="auto-grade-btn" onclick="autoGrade()">è‡ªåŠ¨è¯„åˆ†å¹¶ç”Ÿæˆè¯„è¯­</button>
            </div>
        </div>
    </div>

    <script>
        // æ­£ç¡®ç­”æ¡ˆ
        const answers = {
            "æ‹‰è„±æ³•": ["æ‹‰è„±æ³•"],
            "å®šæ ‡": ["å®šæ ‡"],
            "é‡‘å±æ¶å°": ["é‡‘å±æ¶å°"],
            "å¾®è°ƒå‡é™å°": ["å¾®è°ƒå‡é™å°"],
            "ç››æ¶²ä½“çš„ç»ç’ƒçš¿": ["ç››æ¶²ä½“çš„ç»ç’ƒçš¿"],
            "åœ†ç¯å½¢åŠç‰‡": ["åœ†ç¯å½¢åŠç‰‡"],
            "è„±ç¦»åŠ›": ["è„±ç¦»åŠ›"],
            "å¤–ç›´å¾„": ["å¤–ç›´å¾„"],
            "å†…ç›´å¾„": ["å†…ç›´å¾„"],
            "è¡¨é¢å¼ åŠ›ç³»æ•°": ["è¡¨é¢å¼ åŠ›ç³»æ•°"],
            "çµæ•åº¦": ["çµæ•åº¦"],
            "è¾“å‡ºç”µå‹": ["è¾“å‡ºç”µå‹"],
            "è°ƒé›¶æ—‹é’®": ["è°ƒé›¶æ—‹é’®"],
            "æ•°å­—ç”µå‹è¡¨": ["æ•°å­—ç”µå‹è¡¨"],
            "æœ€å°äºŒä¹˜æ³•": ["æœ€å°äºŒä¹˜æ³•"],
            "å‡é™å°": ["å‡é™å°"],
            "åœ†ç¯å½¢åŠç‰‡": ["åœ†ç¯å½¢åŠç‰‡"],
            "ç»†ä¸": ["ç»†ä¸"],
            "å…¨éƒ¨æµ¸æ²¡äº": ["å…¨éƒ¨æµ¸æ²¡äº"],
            "ç¯å½¢æ¶²è†œ": ["ç¯å½¢æ¶²è†œ"]
        };
        
        // æ°´çš„è¡¨é¢å¼ åŠ›ç³»æ•°æ ‡å‡†å€¼
        const alphaStandard = {
            10: 0.07422,
            15: 0.07322,
            20: 0.07275,
            25: 0.07197,
            30: 0.07118
        };
        
        // å›¾è¡¨å®ä¾‹
        let calibrationChart = null;
        
        // æ€è€ƒé¢˜å‚è€ƒç­”æ¡ˆæ˜¾ç¤º/éšè—
        function toggleAnswer(questionNum) {
            const answerDiv = document.getElementById(`answer${questionNum}`);
            const button = event.target;
            
            if (answerDiv.style.display === 'block') {
                answerDiv.style.display = 'none';
                button.textContent = 'æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆ';
            } else {
                answerDiv.style.display = 'block';
                button.textContent = 'éšè—å‚è€ƒç­”æ¡ˆ';
            }
        }
        
        // æ›´æ–°å•ä¸ªå¡«ç©ºé¢˜çš„çŠ¶æ€å›¾æ ‡
        function updateAnswerStatusIcon(inputElement, status) {
            const statusIcon = inputElement.nextElementSibling;
            if (statusIcon && statusIcon.classList.contains('answer-status')) {
                statusIcon.classList.remove('correct-icon', 'incorrect-icon', 'empty-icon');
                
                if (status === 'correct') {
                    statusIcon.textContent = 'âœ“';
                    statusIcon.classList.add('correct-icon');
                } else if (status === 'incorrect') {
                    statusIcon.textContent = 'âœ—';
                    statusIcon.classList.add('incorrect-icon');
                } else if (status === 'empty') {
                    statusIcon.textContent = 'â—‹';
                    statusIcon.classList.add('empty-icon');
                } else {
                    statusIcon.textContent = '';
                }
            }
        }
        
        // æ›´æ–°æ‰€æœ‰å¡«ç©ºé¢˜çš„çŠ¶æ€å›¾æ ‡
        function updateAllAnswerStatusIcons() {
            const inputs = document.querySelectorAll('.fill-blank');
            inputs.forEach(input => {
                const userAnswer = input.value.trim();
                const correctAnswers = answers[input.dataset.answer];
                
                if (userAnswer === '') {
                    updateAnswerStatusIcon(input, 'empty');
                } else if (correctAnswers && correctAnswers.includes(userAnswer)) {
                    updateAnswerStatusIcon(input, 'correct');
                } else {
                    updateAnswerStatusIcon(input, 'incorrect');
                }
            });
        }
        
        // è®¡ç®—é¢„ä¹ åˆ†æ•°ï¼ˆä»…å¡«ç©ºé¢˜ï¼‰
        function calculatePreScore() {
            const inputs = document.querySelectorAll('.fill-blank');
            let correct = 0;
            let total = inputs.length;
            let emptyCount = 0;

            inputs.forEach(input => {
                const userAnswer = input.value.trim();
                const correctAnswers = answers[input.dataset.answer];
                
                // æ¸…é™¤ä¹‹å‰çš„æ ·å¼
                input.classList.remove('correct', 'incorrect', 'empty');
                
                if (userAnswer === '') {
                    emptyCount++;
                    input.classList.add('empty');
                    updateAnswerStatusIcon(input, 'empty');
                } else if (correctAnswers && correctAnswers.includes(userAnswer)) {
                    correct++;
                    input.classList.add('correct');
                    updateAnswerStatusIcon(input, 'correct');
                } else {
                    input.classList.add('incorrect');
                    updateAnswerStatusIcon(input, 'incorrect');
                }
            });

            // è®¡ç®—åˆ†æ•°ï¼Œæœªç­”é¢˜ä¸è®¡å…¥æ­£ç¡®
            const score = Math.round((correct / total) * 100);
            
            // æ˜¾ç¤ºç»“æœ
            let scoreText = `é¢„ä¹ åˆ†æ•°ï¼š${score}åˆ†ï¼ˆç­”å¯¹${correct}/${total}é¢˜ï¼‰`;
            if (emptyCount > 0) {
                scoreText += `ï¼Œæœªç­”ï¼š${emptyCount}é¢˜`;
            }
            if (correct === total) {
                scoreText += " ğŸ‰ æ»¡åˆ†ï¼";
            } else if (correct === 0) {
                scoreText += " ğŸ˜¢ è¯·è®¤çœŸé¢„ä¹ åå†ä½œç­”ï¼";
            }
            
            document.getElementById('scoreDisplay').innerHTML = scoreText;
            return {score, correct, total, emptyCount};
        }
        
        // è®¡ç®—ä¼ æ„Ÿå™¨çµæ•åº¦K
        function calculateSensitivity() {
            // è·å–ç”µå‹æ•°æ®
            const voltages = [];
            for (let i = 1; i <= 6; i++) {
                const voltage = parseFloat(document.getElementById(`u${i}`).value);
                if (!isNaN(voltage)) {
                    voltages.push(voltage);
                }
            }
            
            if (voltages.length < 3) {
                alert("è¯·è‡³å°‘å¡«å†™3ä¸ªç”µå‹æ•°æ®");
                return;
            }
            
            // è®¡ç®—é‡åŠ›æ•°æ®
            const forces = [0.0049, 0.0098, 0.0147, 0.0196, 0.0245, 0.0294].slice(0, voltages.length);
            
            // çº¿æ€§å›å½’è®¡ç®—æ–œç‡å’Œç›¸å…³ç³»æ•°
            const result = linearRegression(forces, voltages);
            
            document.getElementById('K-value').textContent = result.slope.toFixed(2);
            document.getElementById('r-value').textContent = result.r.toFixed(4);
            document.getElementById('sensitivity-result').style.display = 'block';
            
            // ä¿å­˜Kå€¼ä¾›åç»­è®¡ç®—ä½¿ç”¨
            window.sensorSensitivity = result.slope;
        }
        
        // ç»˜åˆ¶æ ¡å‡†æ›²çº¿ - ä¿ç•™æ–‡ä»¶1çš„å¸ƒå±€
        function drawCalibrationChart() {
            const forces = [];
            const voltages = [];
            
            for (let i = 1; i <= 6; i++) {
                const force = parseFloat(document.getElementById(`f${i}`).textContent);
                const voltage = parseFloat(document.getElementById(`u${i}`).value);
                
                if (!isNaN(voltage)) {
                    forces.push(force);
                    voltages.push(voltage);
                }
            }
            
            if (forces.length < 2) {
                alert("è¯·è‡³å°‘å¡«å†™2ä¸ªç”µå‹æ•°æ®");
                return;
            }
            
            // è®¡ç®—çº¿æ€§å›å½’
            const result = linearRegression(forces, voltages);
            
            // ç”Ÿæˆæ‹Ÿåˆæ•°æ®ç‚¹
            const fitForces = [0, Math.max(...forces) * 1.1];
            const fitVoltages = fitForces.map(f => result.slope * f + result.intercept);
            
            const ctx = document.getElementById('calibrationChart').getContext('2d');
            
            // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œé”€æ¯å®ƒ
            if (calibrationChart) {
                calibrationChart.destroy();
            }
            
            calibrationChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'å®éªŒæ•°æ®',
                            data: forces.map((f, i) => ({x: f, y: voltages[i]})),
                            backgroundColor: 'rgba(54, 162, 235, 0.8)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            pointRadius: 8,
                            pointHoverRadius: 10
                        },
                        {
                            label: 'æ‹Ÿåˆç›´çº¿',
                            data: fitForces.map((f, i) => ({x: f, y: fitVoltages[i]})),
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            showLine: true,
                            lineTension: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'ç ç é‡åŠ› F (N)',
                                font: {
                                    size: 14
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'è¾“å‡ºç”µå‹ U (mV)',
                                font: {
                                    size: 14
                                }
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'åŠ›æ•ä¼ æ„Ÿå™¨æ ¡å‡†æ›²çº¿',
                            font: {
                                size: 18
                            }
                        },
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += `(${context.parsed.x.toFixed(4)} N, ${context.parsed.y.toFixed(2)} mV)`;
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
            
            // æ ‡è®°å·²ç»˜åˆ¶å›¾è¡¨
            window.chartDrawn = true;
        }
        
        // è®¡ç®—è¡¨é¢å¼ åŠ›ç³»æ•°
        function calculateAlpha() {
            // æ£€æŸ¥æ˜¯å¦å·²è®¡ç®—çµæ•åº¦
            if (!window.sensorSensitivity) {
                alert("è¯·å…ˆè®¡ç®—ä¼ æ„Ÿå™¨çµæ•åº¦K");
                return;
            }
            
            const D1 = parseFloat(document.getElementById('D1').value);
            const D2 = parseFloat(document.getElementById('D2').value);
            
            if (isNaN(D1) || isNaN(D2)) {
                alert("è¯·å¡«å†™åœ†ç¯å½¢åŠç‰‡çš„ç›´å¾„");
                return;
            }
            
            const K = window.sensorSensitivity;
            const alphas = [];
            
            // è®¡ç®—æ¯æ¬¡æµ‹é‡çš„Î±å€¼
            for (let i = 1; i <= 5; i++) {
                const U1 = parseFloat(document.getElementById(`u1_${i}`).value);
                const U2 = parseFloat(document.getElementById(`u2_${i}`).value);
                
                if (!isNaN(U1) && !isNaN(U2)) {
                    const deltaU = Math.abs(U1 - U2);
                    const F = deltaU / K;
                    const alpha = F / (Math.PI * (D1/100 + D2/100)); // è½¬æ¢ä¸ºç±³
                    
                    // æ›´æ–°è¡¨æ ¼ - Î”Uä¿ç•™4ä½å°æ•°
                    document.getElementById(`deltaU${i}`).textContent = deltaU.toFixed(4);
                    document.getElementById(`F${i}`).textContent = F.toFixed(6);
                    document.getElementById(`alpha${i}`).textContent = alpha.toFixed(6);
                    
                    alphas.push(alpha);
                }
            }
            
            if (alphas.length === 0) {
                alert("è¯·è‡³å°‘å¡«å†™ä¸€ç»„Uâ‚å’ŒUâ‚‚æ•°æ®");
                return;
            }
            
            // è®¡ç®—å¹³å‡å€¼
            const avgAlpha = alphas.reduce((sum, val) => sum + val, 0) / alphas.length;
            document.getElementById('alpha-avg').textContent = avgAlpha.toFixed(6);
            document.getElementById('alpha-result').style.display = 'block';
            
            // ä¿å­˜å¹³å‡å€¼ä¾›åç»­ä½¿ç”¨
            window.alphaAverage = avgAlpha;
        }
        
        // è®¡ç®—ç›¸å¯¹è¯¯å·®
        function calculateError() {
            const temp = parseFloat(document.getElementById('temp').value);
            
            if (isNaN(temp)) {
                alert("è¯·å¡«å†™æ°´çš„æ¸©åº¦");
                return;
            }
            
            if (!window.alphaAverage) {
                alert("è¯·å…ˆè®¡ç®—è¡¨é¢å¼ åŠ›ç³»æ•°Î±");
                return;
            }
            
            // æŸ¥æ‰¾æœ€æ¥è¿‘çš„æ¸©åº¦å¯¹åº”çš„æ ‡å‡†å€¼
            const temps = Object.keys(alphaStandard).map(Number);
            const closestTemp = temps.reduce((prev, curr) => {
                return Math.abs(curr - temp) < Math.abs(prev - temp) ? curr : prev;
            });
            
            const standardAlpha = alphaStandard[closestTemp];
            const relativeError = Math.abs((window.alphaAverage - standardAlpha) / standardAlpha) * 100;
            
            document.getElementById('relative-error').textContent = relativeError.toFixed(2) + "%";
            document.getElementById('alpha-result').style.display = 'block';
            
            // ä¿å­˜ç›¸å¯¹è¯¯å·®
            window.relativeError = relativeError;
        }
        
        // è‡ªåŠ¨è¯„åˆ†å¹¶ç”Ÿæˆè¯„è¯­ - æ ¹æ®æ–°çš„è¯„åˆ†æ ‡å‡†
        function autoGrade() {
            const preScoreResult = calculatePreScore();
            const preScore = preScoreResult.score;
            const summary = document.getElementById('experiment-summary').value.trim();
            const errorAnalysis = document.getElementById('error-analysis').value.trim();
            const chartDrawn = calibrationChart !== null;
            
            // æ£€æŸ¥æ•°æ®å¡«å†™å®Œæ•´æ€§
            let dataCompleteness = 0;
            const dataInputs = document.querySelectorAll('.data-input');
            let filledCount = 0;
            dataInputs.forEach(input => {
                if (input.value.trim() !== '') filledCount++;
            });
            dataCompleteness = Math.round((filledCount / dataInputs.length) * 100);
            
            // æ£€æŸ¥å®éªŒç»“æœåˆç†æ€§
            let experimentQuality = 0;
            if (window.relativeError !== undefined) {
                const error = window.relativeError;
                if (error < 5) experimentQuality = 100;
                else if (error < 10) experimentQuality = 80;
                else if (error < 15) experimentQuality = 60;
                else if (error < 20) experimentQuality = 40;
                else experimentQuality = 20;
            }
            
            // æ£€æŸ¥æ€è€ƒé¢˜å¡«å†™æƒ…å†µ
            let thoughtScore = 0;
            const thoughtInputs = document.querySelectorAll('.thought-input');
            let thoughtFilled = 0;
            let thoughtTotalLength = 0;
            
            thoughtInputs.forEach(input => {
                const answer = input.value.trim();
                if (answer !== '') {
                    thoughtFilled++;
                    thoughtTotalLength += answer.length;
                }
            });
            
            // æ ¹æ®å¡«å†™æƒ…å†µå’Œå†…å®¹è´¨é‡è¯„åˆ†
            const fillRate = thoughtFilled / thoughtInputs.length;
            const avgLength = thoughtFilled > 0 ? thoughtTotalLength / thoughtFilled : 0;
            
            if (fillRate === 1 && avgLength > 50) thoughtScore = 100;
            else if (fillRate >= 0.8 && avgLength > 40) thoughtScore = 80;
            else if (fillRate >= 0.6 && avgLength > 30) thoughtScore = 60;
            else if (fillRate >= 0.4 && avgLength > 20) thoughtScore = 40;
            else if (fillRate >= 0.2) thoughtScore = 20;
            else thoughtScore = 0;
            
            // æ£€æŸ¥å°ç»“è´¨é‡
            let summaryScore = 0;
            const summaryLength = summary.length;
            // æ£€æŸ¥å…³é”®è¯æ•°é‡
            const keywords = ['å®éªŒ', 'æ”¶è·', 'é—®é¢˜', 'è§£å†³', 'æ”¹è¿›', 'å»ºè®®', 'ç†è§£', 'æŒæ¡', 'å­¦ä¼š', 'æ“ä½œ', 'è¡¨é¢å¼ åŠ›', 'è¯¯å·®'];
            let keywordCount = 0;
            keywords.forEach(keyword => {
                if (summary.includes(keyword)) keywordCount++;
            });
            
            if (summaryLength > 50 && keywordCount >= 5) summaryScore = 100;
            else if (summaryLength > 40 && keywordCount >= 4) summaryScore = 80;
            else if (summaryLength > 30 && keywordCount >= 3) summaryScore = 60;
            else if (summaryLength > 20 && keywordCount >= 2) summaryScore = 40;
            else if (summaryLength > 10) summaryScore = 20;
            else summaryScore = 0;
            
            // æ£€æŸ¥è¯¯å·®åˆ†æè´¨é‡
            let errorAnalysisScore = 0;
            const errorAnalysisLength = errorAnalysis.length;
            const errorKeywords = ['è¯¯å·®', 'æµ‹é‡', 'ç¯å¢ƒ', 'ä»ªå™¨', 'æ“ä½œ', 'ç²¾åº¦', 'æ¸©åº¦', 'æ¹¿åº¦', 'äººä¸º', 'ç³»ç»Ÿ'];
            let errorKeywordCount = 0;
            errorKeywords.forEach(keyword => {
                if (errorAnalysis.includes(keyword)) errorKeywordCount++;
            });
            
            if (errorAnalysisLength > 30 && errorKeywordCount >= 3) errorAnalysisScore = 100;
            else if (errorAnalysisLength > 20 && errorKeywordCount >= 2) errorAnalysisScore = 80;
            else if (errorAnalysisLength > 10) errorAnalysisScore = 60;
            else if (errorAnalysisLength > 0) errorAnalysisScore = 40;
            else errorAnalysisScore = 0;
            
            // è®¡ç®—ç»¼åˆåˆ†æ•°ï¼ˆæ ¹æ®æ–°çš„è¯„åˆ†æ ‡å‡†ï¼‰
            let totalScore = 0;
            let scoreBreakdown = [];
            
            // 1. é¢„ä¹ å¡«ç©ºï¼ˆ25%ï¼‰
            const preScoreWeighted = Math.round(preScore * 0.25);
            totalScore += preScoreWeighted;
            scoreBreakdown.push(`é¢„ä¹ å¡«ç©ºï¼š${preScore}Ã—25%=${preScoreWeighted}`);
            
            // 2. æ•°æ®å®Œæ•´æ€§ä¸åˆç†æ€§ï¼ˆ25%ï¼‰
            const dataQuality = Math.round((dataCompleteness * 0.6 + experimentQuality * 0.4));
            const dataScore = Math.round(dataQuality * 0.25);
            totalScore += dataScore;
            scoreBreakdown.push(`æ•°æ®å®Œæ•´æ€§ä¸åˆç†æ€§ï¼š(${dataCompleteness}Ã—60%+${experimentQuality}Ã—40%)Ã—25%=${dataScore}`);
            
            // 3. æ•°æ®è¯¯å·®ï¼ˆ10%ï¼‰
            const errorScore = window.relativeError !== undefined ? Math.round(experimentQuality * 0.1) : 0;
            totalScore += errorScore;
            scoreBreakdown.push(`æ•°æ®è¯¯å·®ï¼š${experimentQuality}Ã—10%=${errorScore}`);
            
            // 4. å›¾è¡¨ç»˜åˆ¶ï¼ˆ10%ï¼‰
            const chartScore = chartDrawn ? 100 : 0;
            const chartScoreWeighted = Math.round(chartScore * 0.1);
            totalScore += chartScoreWeighted;
            scoreBreakdown.push(`å›¾è¡¨ç»˜åˆ¶ï¼š${chartScore}Ã—10%=${chartScoreWeighted}`);
            
            // 5. æ€è€ƒé¢˜ï¼ˆ15%ï¼‰
            const thoughtScoreWeighted = Math.round(thoughtScore * 0.15);
            totalScore += thoughtScoreWeighted;
            scoreBreakdown.push(`æ€è€ƒé¢˜ï¼š${thoughtScore}Ã—15%=${thoughtScoreWeighted}`);
            
            // 6. å®éªŒå°ç»“ï¼ˆ15%ï¼‰
            const summaryAndErrorScore = Math.round((summaryScore * 0.7 + errorAnalysisScore * 0.3));
            const summaryScoreWeighted = Math.round(summaryAndErrorScore * 0.15);
            totalScore += summaryScoreWeighted;
            scoreBreakdown.push(`å®éªŒå°ç»“ä¸è¯¯å·®åˆ†æï¼š(${summaryScore}Ã—70%+${errorAnalysisScore}Ã—30%)Ã—15%=${summaryScoreWeighted}`);
            
            // ç”Ÿæˆè¯„è¯­
            let comment = "";
            let grade = "ä¸åŠæ ¼";
            let gradeColor = "#c62828";
            
            if (totalScore >= 90) {
                grade = "ä¼˜ç§€";
                gradeColor = "#2e7d32";
                comment = `ğŸ‰ å®éªŒæŠ¥å‘Šéå¸¸å‡ºè‰²ï¼ç»¼åˆå¾—åˆ†${totalScore}åˆ†ã€‚é¢„ä¹ æ‰å®ï¼ˆ${preScore}åˆ†ï¼‰ï¼Œæ•°æ®è®°å½•å®Œæ•´å‡†ç¡®ï¼Œå›¾è¡¨ç»˜åˆ¶è§„èŒƒï¼Œæ€è€ƒé¢˜å›ç­”å……åˆ†ï¼Œå°ç»“è¯¦å®ã€‚`;
            } else if (totalScore >= 80) {
                grade = "è‰¯å¥½";
                gradeColor = "#388e3c";
                comment = `ğŸ‘ å®éªŒæŠ¥å‘Šè´¨é‡è¾ƒé«˜ï¼ç»¼åˆå¾—åˆ†${totalScore}åˆ†ã€‚é¢„ä¹ è¾ƒå¥½ï¼ˆ${preScore}åˆ†ï¼‰ï¼Œæ•°æ®è®°å½•è¾ƒä¸ºå®Œæ•´ï¼Œå›¾è¡¨ç»˜åˆ¶æ­£ç¡®ï¼Œåˆ†æè¾ƒä¸ºå……åˆ†ã€‚`;
            } else if (totalScore >= 70) {
                grade = "ä¸­ç­‰";
                gradeColor = "#f57c00";
                comment = `âœŠ å®éªŒæŠ¥å‘ŠåŸºæœ¬åˆæ ¼ï¼ç»¼åˆå¾—åˆ†${totalScore}åˆ†ã€‚é¢„ä¹ ä¸€èˆ¬ï¼ˆ${preScore}åˆ†ï¼‰ï¼Œæ•°æ®è®°å½•å’Œè®¡ç®—å­˜åœ¨ä¸€å®šè¯¯å·®ï¼Œåˆ†æè¾ƒä¸ºç®€å•ã€‚`;
            } else if (totalScore >= 60) {
                grade = "åŠæ ¼";
                gradeColor = "#ff9800";
                comment = `âš ï¸ å®éªŒæŠ¥å‘Šå‹‰å¼ºåŠæ ¼ï¼ç»¼åˆå¾—åˆ†${totalScore}åˆ†ã€‚é¢„ä¹ ä¸è¶³ï¼ˆ${preScore}åˆ†ï¼‰ï¼Œæ•°æ®è®°å½•æˆ–è®¡ç®—å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼Œåˆ†æä¸è¶³ã€‚`;
            } else {
                grade = "ä¸åŠæ ¼";
                gradeColor = "#d32f2f";
                comment = `âŒ å®éªŒæŠ¥å‘Šæœªè¾¾åˆ°åŸºæœ¬è¦æ±‚ï¼æŠ¥å‘Šå¾—åˆ†${totalScore}åˆ†ã€‚è¯·é‡æ–°è®¤çœŸå­¦ä¹ å®éªŒåŸç†ï¼Œè¡¥å……å®Œæ•´å®éªŒè®°å½•ï¼`;
            }
            
            // å…·ä½“å»ºè®®
            let suggestions = [];
            if (preScore < 70) suggestions.push("é¢„ä¹ éƒ¨åˆ†éœ€è¦åŠ å¼ºï¼Œè¯·è®¤çœŸé˜…è¯»å®éªŒåŸç†");
            if (dataCompleteness < 80) suggestions.push("æ•°æ®è®°å½•éœ€è¦æ›´åŠ å®Œæ•´");
            if (experimentQuality < 60) suggestions.push("å®éªŒè¯¯å·®è¾ƒå¤§ï¼Œè¯·æ£€æŸ¥æ“ä½œå’Œè®¡ç®—");
            if (!chartDrawn) suggestions.push("è¯·å®Œæˆå›¾è¡¨çš„ç»˜åˆ¶");
            if (thoughtScore < 60) suggestions.push("æ€è€ƒé¢˜å›ç­”éœ€è¦æ›´åŠ å……åˆ†è¯¦ç»†");
            if (summaryScore < 60) suggestions.push("å®éªŒå°ç»“éœ€è¦æ›´åŠ è¯¦å®ï¼Œåº”åŒ…å«å®éªŒæ”¶è·ã€é—®é¢˜å’Œæ”¹è¿›å»ºè®®");
            if (errorAnalysisScore < 60) suggestions.push("è¯¯å·®åˆ†æéœ€è¦æ›´åŠ æ·±å…¥");
            
            if (suggestions.length > 0) {
                comment += ` æ”¹è¿›å»ºè®®ï¼š${suggestions.join('ï¼›')}ã€‚`;
            }
            
            // æ˜¾ç¤ºè¯¦ç»†åˆ†æ•°åˆ†è§£
            comment += ` è¯„åˆ†è¯¦æƒ…ï¼š${scoreBreakdown.join('ï¼Œ')}ï¼Œæ€»è¯„ï¼š${grade}ï¼ˆ${totalScore}åˆ†ï¼‰ã€‚`;
            
            // è·å–æŒ‡å¯¼æ•™å¸ˆå§“åå’Œå½“å‰æ—¥æœŸ
            const teacherName = document.getElementById('instructor').value || 'æœªå¡«å†™';
            const currentDate = new Date().toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // æ›´æ–°è¯„è¯­å†…å®¹
            document.getElementById('commentContent').innerHTML = comment;
            document.getElementById('commentContent').style.color = gradeColor;
            document.getElementById('teacherName').textContent = teacherName;
            document.getElementById('currentDate').textContent = currentDate;
            document.getElementById('commentFooter').style.display = 'block';
        }
        
        // çº¿æ€§å›å½’å‡½æ•°
        function linearRegression(x, y) {
            const n = x.length;
            
            // è®¡ç®—å‡å€¼
            const xMean = x.reduce((sum, val) => sum + val, 0) / n;
            const yMean = y.reduce((sum, val) => sum + val, 0) / n;
            
            // è®¡ç®—æ–œç‡å’Œæˆªè·
            let numerator = 0;
            let denominator = 0;
            
            for (let i = 0; i < n; i++) {
                numerator += (x[i] - xMean) * (y[i] - yMean);
                denominator += (x[i] - xMean) ** 2;
            }
            
            const slope = numerator / denominator;
            const intercept = yMean - slope * xMean;
            
            // è®¡ç®—ç›¸å…³ç³»æ•°
            let sumXY = 0, sumX2 = 0, sumY2 = 0;
            for (let i = 0; i < n; i++) {
                sumXY += x[i] * y[i];
                sumX2 += x[i] ** 2;
                sumY2 += y[i] ** 2;
            }
            
            const r = (n * sumXY - x.reduce((s, v) => s + v, 0) * y.reduce((s, v) => s + v, 0)) /
                     Math.sqrt((n * sumX2 - (x.reduce((s, v) => s + v, 0) ** 2)) *
                              (n * sumY2 - (y.reduce((s, v) => s + v, 0) ** 2)));
            
            return { slope, intercept, r };
        }
        
        // åˆå§‹åŒ–é¡µé¢
        window.onload = function() {
            // æ·»åŠ å¡«ç©ºæ¡†å˜åŒ–ç›‘å¬
            const fillBlanks = document.querySelectorAll('.fill-blank');
            fillBlanks.forEach(input => {
                input.addEventListener('change', function() {
                    // ç§»é™¤ä¹‹å‰çš„æ ·å¼
                    this.classList.remove('correct', 'incorrect', 'empty');
                    
                    // æ¸…ç©ºçŠ¶æ€å›¾æ ‡
                    const statusIcon = this.nextElementSibling;
                    if (statusIcon && statusIcon.classList.contains('answer-status')) {
                        statusIcon.textContent = '';
                        statusIcon.classList.remove('correct-icon', 'incorrect-icon', 'empty-icon');
                    }
                });
            });
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸ
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
        };
    </script>
</body>

</html>
